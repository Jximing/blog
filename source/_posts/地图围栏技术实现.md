---
title: 地图围栏技术实现
date: 2021-07-18 09:34:58
categories:
tags:
---

### 数据存储结构

- 有序的一系列坐标点
- 相邻点间距离（多长一条边） 和前端商量
- 点数限制（和前端确认需要多少个点）

### 判断多边形是否合法 （边坐在线段是否相交）

- 前端判断？
- 后端判断不相邻的线段是否相交

### 判断多个多边形是否相交 

- 前端判断？

### 判断一个点是否在多边形内

#### 直接MySQL判断（未验证）

- https://www.itread01.com/p/1210783.html

#### 射线法

> 若一个点在一任意多边形中，则从该点沿任意方向射出一条射线，射线与多边形的交点个数为奇数。

- 问题：
  - 点在多边形边上
  - 点在多边形顶点上
  - 射线经过多边形顶点
  - 射线经过多边形的一条边
- 性能优化
  - 空间索引r树判断
